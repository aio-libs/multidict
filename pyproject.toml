[build-system]
requires = [
  # NOTE: The following build dependencies are necessary for initial
  # NOTE: provisioning of the in-tree build backend located under
  # NOTE: `packaging/pep517_backend/`.
  "expandvars",
  "setuptools >= 47",  # Minimum required for `version = attr:`
  "tomli; python_version < '3.11'",
]
backend-path = ["packaging"]  # requires `pip >= 20` or `pep517 >= 0.6.0`
build-backend = "pep517_backend.hooks"  # wraps `setuptools.build_meta`

[[tool.local.extensions."multidict._multidict"]]
c-sources = ["multidict/_multidict.c"]
extra_compile_args = "${CFLAGS}"


[tool.local.cythonize]

[tool.local.cythonize.env]

[tool.local.cythonize.flags]

[tool.local.cythonize.kwargs]

[tool.local.cythonize.kwargs.directive]

[tool.local.cythonize.kwargs.compile-time-env]

[tool.local.cythonize.kwargs.option]

[tool.cibuildwheel]
test-requires = "-r requirements/pytest.txt"
test-command = "pytest {project}/tests"
# don't build PyPy wheels, install from source instead
skip = "pp*"
free-threaded-support = true

[tool.cibuildwheel.linux]
before-all = "yum install -y libffi-devel || apk add --upgrade libffi-dev || apt-get install libffi-dev"
